{% extends 'base.html' %}

{% block title %}
  {{item.item_id }} - {{ block.super }}
{% endblock %}

{% block breadcrumb %}
  <li class="breadcrumb-item"><a href="{% url 'productos' %}">Productos</a></li>
  <li class="breadcrumb-item active">{{ item.descripcion }}</li>
{% endblock %}

  {% block content %}
  <table class="table table-triped table-sm table-responsive" >
        <tr>
          <th>ID</th>
          <td>{{ item.item_id }}</td>
        </tr>
        <tr>
          <th>Barcode</th>
          <td>{{ item.barcode }}</td>
        </tr>
        <tr>
          <th>Descripción</th>
          <td>{{ item.descripcion }}</td>
        </tr>
        <tr>
          <th>Marca</th>
          <td>{{ item.marca }}</td>
        </tr>
        <tr>
          <th>Precio</th>
          <td>0</td>
        </tr>
      </table>
  <ol class="breadcrumb my-4">
    <li class="breadcrumb-item"><h4>Logs</h4></li>
  </ol>

  <table class="table table-striped table-sm">
    <thead class="thead-inverse">
        <tr>
          <th>Fecha</th>
          <th>Operario</th>
          <th>Producto</th>
          <th>Cantidad</th>
        </tr>
    </thead>
    <tbody>
      {% for log in logs %}
      {% if log.action %}
      <tr class="table-success">
      {% else %}
      <tr class="table-danger">
      {% endif %}
      <td>{{ log.created_at }}</td>
      <td>{{ log.created_by }}</td>
      <td>{{ log.item }}</td>
      <td>{{ log.cantidad }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% include 'includes/pagination.html' %}
    <ol class="breadcrumb my-4">
      <li class="breadcrumb-item"><h4>Estadísticas</h4></li>
    </ol>
  <div class="row">
    <div class="col-lg-6">
      <h3>Entrada / Salida</h3>
      <div class="row">
        <div class="col-lg-4">
          <p>Retirados semana actual = {{ stats.0.0 }}</p>
          <p>Retirados 1 semana atrás = {{ stats.0.1 }}</p>
          <p>Retirados 2 semanas atrás = {{ stats.0.2 }}</p>
          <p>Retirados 3 semanas atrás = {{ stats.0.3 }}</p>
          <p>Retirados mes anterior = {{ stats.0.4 }}</p>
        </div>
        <div class="col-lg-4">
          <p>Ingresados semana actual = {{ stats.1.0 }}</p>
          <p>Ingresados 1 semana atrás = {{ stats.1.1 }}</p>
          <p>Ingresados 2 semanas atrás = {{ stats.1.2 }}</p>
          <p>Ingresados 3 semanas atrás = {{ stats.1.3 }}</p>
          <p>Ingresados mes anterior = {{ stats.1.4 }}</p>
        </div>
        </div>
    </div>
    <div class="col-lg-4">
      <h2>Stock en depósito:
        {% if prom > 14 and item.stock %}
        <span class="badge badge-success">{{ item.stock }}</span></h2>
      {% elif prom > 7 and item.stock %}
        <span class="badge badge-warning">{{ item.stock }}</span></h2>
      {% else %}
        <span class="badge badge-danger">{{ item.stock }}</span></h2>
      {% endif %}
      <h4>Fuera de stock en</h4>
      <p align="center"><h3> {{ prom }} días </h3></p>
      <p> basado en promedio de retiros del mes anterior</p>
    </div>
  </div>
{% endblock %}
